{"version":3,"file":"index.cjs","sources":["../src/constants.ts","../src/utils/check.ts","../src/utils/array.ts","../src/utils/clone.ts","../src/utils/cut.ts","../src/utils/has-own-property.ts","../src/utils/options.ts","../src/module.ts","../src/presets.ts"],"sourcesContent":["/*\n * Copyright (c) 2023.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nexport enum PriorityName {\n    LEFT = 'left',\n    RIGHT = 'right',\n}\n","/*\n * Copyright (c) 2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nexport function isObject(item: unknown) : item is Record<string, any> {\n    return (\n        !!item &&\n        typeof item === 'object' &&\n        !Array.isArray(item)\n    );\n}\n\nexport function isSafeInput(object: any) : boolean {\n    try {\n        JSON.stringify(object);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\nexport function isSafeKey(key: string) : boolean {\n    return key !== '__proto__' &&\n        key !== 'prototype' &&\n        key !== 'constructor';\n}\n\nexport function isEqual(x: any, y: any): boolean {\n    if (Object.is(x, y)) return true;\n\n    if (x instanceof Date && y instanceof Date) {\n        return x.getTime() === y.getTime();\n    }\n\n    if (x instanceof RegExp && y instanceof RegExp) {\n        return x.toString() === y.toString();\n    }\n\n    if (\n        isObject(x) &&\n        isObject(y)\n    ) {\n        const keysX = Reflect.ownKeys(x) as string[];\n        const keysY = Reflect.ownKeys(y) as string[];\n        if (keysX.length !== keysY.length) {\n            return false;\n        }\n\n        for (let i = 0; i < keysX.length; i++) {\n            const key = keysX[i];\n            if (!Reflect.has(y, key) || !isEqual(x[key], y[key])) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    if (\n        Array.isArray(x) &&\n        Array.isArray(y)\n    ) {\n        if (x.length !== y.length) {\n            return false;\n        }\n\n        for (let i = 0; i < x.length; i++) {\n            if (!isEqual(x[i], y[i])) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    return false;\n}\n","/*\n * Copyright (c) 2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { isEqual } from './check';\n\nexport function distinctArray<T = any>(arr: T[]) : T[] {\n    for (let i = 0; i < arr.length; i++) {\n        for (let j = arr.length - 1; j > i; j--) {\n            if (isEqual(arr[i], arr[j])) {\n                arr.splice(j, 1);\n            }\n        }\n    }\n\n    return arr;\n}\n\nexport function mergeArrays(...sources: any[][]) : any[] {\n    return ([] as any[]).concat.apply([], [...sources]);\n}\n\nexport function mergeArraysDistinct(...sources: any[][]) : any[] {\n    return distinctArray(mergeArrays(...sources));\n}\n","/*\n * Copyright (c) 2023.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { isObject } from './check';\n\n/* istanbul ignore next */\nconst gT = (() => {\n    if (typeof globalThis !== 'undefined') {\n        return globalThis;\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    if (typeof self !== 'undefined') {\n        // eslint-disable-next-line no-restricted-globals\n        return self;\n    }\n\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n\n    throw new Error('unable to locate global object');\n})();\n\n/* istanbul ignore next */\nexport function clone<T>(value: T) : T {\n    if (gT.structuredClone) {\n        return gT.structuredClone(value);\n    }\n\n    /* istanbul ignore next */\n    if (isObject(value)) {\n        return { ...value };\n    }\n\n    /* istanbul ignore next */\n    if (Array.isArray(value)) {\n        return [...value] as T;\n    }\n\n    /* istanbul ignore next */\n    return value;\n}\n","/*\n * Copyright (c) 2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { isObject } from './check';\n\nexport function cutObject<T extends Record<string, any>>(input: T, depth: number) : T {\n    if (depth < 0) {\n        return {} as T;\n    }\n\n    const value = { ...input };\n    const keys : (keyof T)[] = Object.keys(value);\n\n    for (let i = 0; i < keys.length; i++) {\n        if (isObject(value[keys[i]])) {\n            value[keys[i]] = cutObject(value[keys[i]], depth - 1);\n        }\n    }\n\n    return value;\n}\n","/*\n * Copyright (c) 2021.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function hasOwnProperty<X extends {}, Y extends PropertyKey>(obj: X, prop: Y): obj is X & Record<Y, unknown> {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","/*\n * Copyright (c) 2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { PriorityName } from '../constants';\nimport type { Options, OptionsInput } from '../type';\n\nexport function buildOptions(options?: OptionsInput) : Options {\n    options = options || {};\n\n    options.array = options.array ?? true;\n    options.arrayDistinct = options.arrayDistinct ?? false;\n    options.clone = options.clone ?? false;\n    options.inPlace = options.inPlace ?? false;\n    options.priority = options.priority || PriorityName.LEFT;\n\n    return options as Options;\n}\n","/*\n * Copyright (c) 2022.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { PriorityName } from './constants';\nimport type {\n    Merger,\n    MergerResult,\n    MergerSource,\n    MergerSourceUnwrap,\n    Options,\n    OptionsInput,\n} from './type';\n\nimport {\n    buildOptions,\n    clone,\n    distinctArray,\n    hasOwnProperty,\n    isObject,\n    isSafeInput,\n    isSafeKey,\n} from './utils';\n\nfunction baseMerger<B extends MergerSource[]>(\n    options: Options,\n    ...sources: B\n) : MergerResult<B> {\n    let target : MergerSourceUnwrap<B>;\n    let source : MergerSourceUnwrap<B> | undefined;\n    if (options.priority === PriorityName.RIGHT) {\n        target = sources.pop() as MergerSourceUnwrap<B>;\n        source = sources.pop() as MergerSourceUnwrap<B>;\n    } else {\n        target = sources.shift() as MergerSourceUnwrap<B>;\n        source = sources.shift() as MergerSourceUnwrap<B>;\n    }\n\n    if (!source) {\n        if (\n            Array.isArray(target) &&\n            options.arrayDistinct\n        ) {\n            return distinctArray(target) as MergerResult<B>;\n        }\n\n        return target as MergerResult<B>;\n    }\n\n    if (\n        Array.isArray(target) &&\n        Array.isArray(source)\n    ) {\n        target.push(...source as MergerSource[]);\n\n        if (options.priority === PriorityName.RIGHT) {\n            return baseMerger(\n                options,\n                ...sources,\n                target,\n            ) as MergerResult<B>;\n        }\n\n        return baseMerger(\n            options,\n            target,\n            ...sources,\n        ) as MergerResult<B>;\n    }\n\n    if (\n        isObject(target) &&\n        isObject(source)\n    ) {\n        const keys = Object.keys(source);\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i] as (keyof MergerSourceUnwrap<B>);\n\n            if (hasOwnProperty(target, key)) {\n                if (!isSafeKey(key as string)) {\n                    continue;\n                }\n\n                if (options.strategy) {\n                    const applied = options.strategy(target, key as string, source[key]);\n                    if (typeof applied !== 'undefined') {\n                        continue;\n                    }\n                }\n\n                if (\n                    isObject(target[key]) &&\n                    isObject(source[key])\n                ) {\n                    if (!isSafeInput(source[key])) {\n                        continue;\n                    }\n\n                    if (options.priority === PriorityName.RIGHT) {\n                        target[key] = baseMerger(\n                            options,\n                            source[key] as MergerSource,\n                            target[key] as MergerSource,\n                        ) as MergerSourceUnwrap<B>[keyof MergerSourceUnwrap<B>];\n                    } else {\n                        target[key] = baseMerger(\n                            options,\n                            target[key] as MergerSource,\n                            source[key] as MergerSource,\n                        ) as MergerSourceUnwrap<B>[keyof MergerSourceUnwrap<B>];\n                    }\n\n                    continue;\n                }\n\n                if (\n                    options.array &&\n                    Array.isArray(target[key]) &&\n                    Array.isArray(source[key])\n                ) {\n                    switch (options.priority) {\n                        case PriorityName.LEFT:\n                            Object.assign(target, {\n                                [key]: baseMerger(options, target[key] as MergerSource, source[key] as MergerSource),\n                            });\n                            break;\n                        case PriorityName.RIGHT:\n                            Object.assign(target, {\n                                [key]: baseMerger(options, source[key] as MergerSource, target[key] as MergerSource),\n                            });\n                            break;\n                    }\n                }\n            } else {\n                Object.assign(target, {\n                    [key]: source[key],\n                });\n            }\n        }\n    }\n\n    if (options.priority === PriorityName.RIGHT) {\n        return baseMerger(options, ...sources, target) as MergerResult<B>;\n    }\n\n    return baseMerger(options, target, ...sources) as MergerResult<B>;\n}\n\nexport function createMerger(input?: OptionsInput) : Merger {\n    const options = buildOptions(input);\n\n    return <B extends MergerSource[]>(\n        ...sources: B\n    ) : MergerResult<B> => {\n        if (!sources.length) {\n            throw new SyntaxError('At least one input element is required.');\n        }\n\n        if (options.clone) {\n            return baseMerger(options, ...clone(sources));\n        }\n\n        if (!options.inPlace) {\n            if (options.priority === PriorityName.LEFT) {\n                if (Array.isArray(sources[0])) {\n                    sources.unshift([]);\n                } else {\n                    sources.unshift({});\n                }\n            } else if (Array.isArray(sources[0])) {\n                sources.push([]);\n            } else {\n                sources.push({});\n            }\n        }\n\n        return baseMerger(options, ...sources);\n    };\n}\n\nexport const merge = createMerger();\n","/*\n * Copyright (c) 2023.\n * Author Peter Placzek (tada5hi)\n * For the full copyright and license information,\n * view the LICENSE file that was distributed with this source code.\n */\n\nimport { createMerger } from './module';\nimport type { MergerResult } from './type';\n\n/**\n * Assign source attributes to a target object.\n *\n * @param target\n * @param sources\n */\nexport function assign<A extends Record<string, any>, B extends Record<string, any>[]>(\n    target: A,\n    ...sources: B\n) : A & MergerResult<B> {\n    return createMerger({\n        inPlace: true,\n        priority: 'left',\n        array: false,\n    })(target, ...sources) as A & MergerResult<B>;\n}\n"],"names":["PriorityName","LEFT","RIGHT","isObject","item","Array","isArray","isSafeInput","object","JSON","stringify","e","isSafeKey","key","isEqual","x","y","Object","is","Date","getTime","RegExp","toString","keysX","Reflect","ownKeys","keysY","length","i","has","distinctArray","arr","j","splice","mergeArrays","sources","concat","apply","mergeArraysDistinct","_extends","gT","globalThis","self","window","global","Error","clone","value","structuredClone","cutObject","input","depth","keys","hasOwnProperty","obj","prop","prototype","call","buildOptions","options","array","arrayDistinct","inPlace","priority","baseMerger","target","source","pop","shift","push","strategy","applied","assign","createMerger","SyntaxError","unshift","merge"],"mappings":"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"}